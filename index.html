<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Welcome to NTDMC Trachoma model’s documentation! &#8212; NTDMC Trachoma model  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="welcome-to-ntdmc-trachoma-model-s-documentation">
<h1>Welcome to NTDMC Trachoma model’s documentation!<a class="headerlink" href="#welcome-to-ntdmc-trachoma-model-s-documentation" title="Link to this heading">¶</a></h1>
<p>On this page:</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#welcome-to-ntdmc-trachoma-model-s-documentation" id="id4">Welcome to NTDMC Trachoma model’s documentation!</a></p>
<ul>
<li><p><a class="reference internal" href="#installation" id="id5">Installation</a></p></li>
<li><p><a class="reference internal" href="#running-the-model" id="id6">Running the model</a></p>
<ul>
<li><p><a class="reference internal" href="#expected-arguments" id="id7">Expected arguments</a></p></li>
<li><p><a class="reference internal" href="#outputs" id="id8">Outputs</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="installation">
<span id="id1"></span><h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>We recommend that you install the model within a dedicated Python
virtual environment. See <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv — Creation of virtual environments</a> for more information
about working with virtual environments.</p>
<p>The model can be installed with the standard <cite>pip</cite> package management
utility, specifying the URL of the project’s GitHub repository
followed by the string <code class="docutils literal notranslate"><span class="pre">&#64;v&lt;x.y.z&gt;</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;x.y.z&gt;</span></code> is the version
number.  The latest release’s version number can be found <a class="reference external" href="https://github.com/NTD-Modelling-Consortium/ntd-model-trachoma/tags">here</a>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/NTD-Modelling-Consortium/ntd-model-trachoma.git@v1.0.1
</pre></div>
</div>
</section>
<section id="running-the-model">
<h2>Running the model<a class="headerlink" href="#running-the-model" title="Link to this heading">¶</a></h2>
<p>Currently, the model is expected to be used as a library through the
unique entry point function <cite>run_single_simulation</cite>.  The calling code
is expected to build the objects required to be passed as parameter of
this model entry point function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ntd_trachoma</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_single_simulation</span>

<span class="n">vals</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">run_single_simulation</span><span class="p">(</span>
    <span class="n">params</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">timesim</span><span class="p">,</span> <span class="n">burnin</span><span class="p">,</span> <span class="n">demog</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">MDA_times</span><span class="p">,</span> <span class="n">MDAData</span><span class="p">,</span>
    <span class="n">vacc_times</span><span class="p">,</span> <span class="n">VaccData</span><span class="p">,</span> <span class="n">outputTimes</span><span class="p">,</span> <span class="n">doSurvey</span><span class="p">,</span> <span class="n">doIHMEOutput</span><span class="p">,</span>
    <span class="n">numpy_state</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The arguments expected by the <code class="docutils literal notranslate"><span class="pre">run_single_simulation</span></code> function are
described below.</p>
<section id="expected-arguments">
<span id="id2"></span><h3>Expected arguments<a class="headerlink" href="#expected-arguments" title="Link to this heading">¶</a></h3>
<p>NumPy arrays are one-dimensional arrays with one element per
individual in the population.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) Dictionary made of the following keys:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">N</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>)  The population size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">av_I_duration</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Average duration of the I state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">av_ID_duration</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Average duration of the ID state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">av_D_duration</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Average duration of the D state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inf_red</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Missing description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dis_red</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Missing description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_ID</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>) Minimum duration for the ID state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_D</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>) Minimum duration of the D state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v_1</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Missing description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v_2</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Missing description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">phi</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Missing description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">epsilon</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Missing description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MDA_Eff</span></code> (<code class="docutils literal notranslate"><span class="pre">float</span></code>) Efficacy of MDA treatment</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rho</span></code> Correlation parameter for systematic non-compliance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_inf_sev</span></code> Missing description</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">vals</span></code> is a dictionary made of the following keys:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">IndI</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>) Infected status for each
individual (<cite>0</cite> or <cite>1</cite>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IndD</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>) Diseased status for each
individual (<cite>0</cite> or <cite>1</cite>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T_latent</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>)  Latent period (weeks)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T_ID</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>)  ID period (weeks)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T_D</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>)  Diseased period (weeks)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ind_latent</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[float]</span></code>) Latent base period
(weeks)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ind_ID_period_base</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[float]</span></code>) ID base period
(weeks)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bact_load</span></code> <code class="docutils literal notranslate"><span class="pre">numpy.ndarray[float]</span></code>  Bacterial load</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Age</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>)  Age</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">N_MDA</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>)  Total number of MDA rounds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">No_Inf</span></code> <code class="docutils literal notranslate"><span class="pre">numpy.ndarray[int]</span></code>  Total number of infections.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">True_Prev_Disease_children</span></code> (<code class="docutils literal notranslate"><span class="pre">list[float]</span></code>) Diseased
prevalence among children aged 9 to 15 years old.  One list
element per simulated week.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vaccinated</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[bool]</span></code>) Individuals vaccination
status</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">treatProbability</span></code> (<code class="docutils literal notranslate"><span class="pre">numpy.ndarray[float]</span></code>) MDA treatment
probability</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MDAData</span></code> (<code class="docutils literal notranslate"><span class="pre">list[list[float,</span> <span class="pre">int,</span> <span class="pre">int,</span> <span class="pre">float,</span> <span class="pre">int,</span> <span class="pre">int]]</span></code>) One
element per MDA round.  Each element is a list of 6 elements:</p>
<ul>
<li><p>The MDA round time (<code class="docutils literal notranslate"><span class="pre">float</span></code>), e.g. <code class="docutils literal notranslate"><span class="pre">2022.53</span></code> for a round
sometimes mid-june. Round times are expressed as iteration indices
within the <code class="docutils literal notranslate"><span class="pre">MDA_times</span></code> argument, see below.</p></li>
<li><p>The population minimum age (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
<li><p>The population maximum age (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
<li><p>The MDA coverage value  (<code class="docutils literal notranslate"><span class="pre">float</span></code>)</p></li>
<li><p>The MDA campaign index (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
<li><p>The total number of MDA campaigns (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MDA_times</span></code> (<code class="docutils literal notranslate"><span class="pre">list[int]</span></code>) One element per MDA round.  MDA times
as a number of iterations, inclusive of burnin time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VaccData</span></code> (<code class="docutils literal notranslate"><span class="pre">list[list[float,</span> <span class="pre">int,</span> <span class="pre">int,</span> <span class="pre">float,</span> <span class="pre">int,</span> <span class="pre">int]]</span></code>) One
element per vaccination round.  Each element is a list of 6
elements:</p>
<ul>
<li><p>The vaccination round time (<code class="docutils literal notranslate"><span class="pre">float</span></code>), e.g. <code class="docutils literal notranslate"><span class="pre">2022.53</span></code> for a
round sometimes mid-june. Round times are expressed as iteration
indices within the <code class="docutils literal notranslate"><span class="pre">vaccination_times</span></code> argument, see below.</p></li>
<li><p>The population minimum age (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
<li><p>The population maximum age (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
<li><p>The vaccination coverage value  (<code class="docutils literal notranslate"><span class="pre">float</span></code>)</p></li>
<li><p>The vaccination campaign index (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
<li><p>The total number of vaccination campaigns (<code class="docutils literal notranslate"><span class="pre">int</span></code>)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">vacc_times</span></code> (<code class="docutils literal notranslate"><span class="pre">list[int]</span></code>) One element per vaccination round.
Vaccination times as a number of iterations, inclusive of burnin
time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputTimes</span></code> (<code class="docutils literal notranslate"><span class="pre">list[int]</span></code>) Iteration indices at which to record
output.  See &lt;simulation outputs&gt;.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doSurvey</span></code> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) Whether or not to carry surveys.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doIHMEOutput</span></code> (<code class="docutils literal notranslate"><span class="pre">bool</span></code>) Whether or not to build IHME outputs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy_state</span></code> NumPy random generator state as returned by <code class="docutils literal notranslate"><span class="pre">numpyp.random.get_state()</span></code>. See <a class="reference external" href="https://numpy.org/doc/1.26/reference/random/generated/numpy.random.get_state.html">numpy.random.get_state</a>.</p></li>
</ul>
</section>
<section id="outputs">
<span id="id3"></span><h3>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">run_single_simulation</span></code> function returns a 2-tuple <code class="docutils literal notranslate"><span class="pre">(vals,</span>
<span class="pre">results)</span></code>, which elements are described below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">vals</span></code> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) The input dictionary <code class="docutils literal notranslate"><span class="pre">vals</span></code> with values
mutated to reflect the final state of the population.  See
<a class="reference internal" href="#expected-arguments"><span class="std std-ref">Expected arguments</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">results</span></code> (<code class="docutils literal notranslate"><span class="pre">list[Result]</span></code>) Elements are instances of the
<code class="docutils literal notranslate"><span class="pre">ntd-trachoma.Result</span></code> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Result</span><span class="p">:</span>
    <span class="n">time</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">IndI</span><span class="p">:</span> <span class="n">ndarray</span>
    <span class="n">IndD</span><span class="p">:</span> <span class="n">ndarray</span>
    <span class="n">Age</span><span class="p">:</span><span class="n">ndarray</span>
    <span class="n">NoInf</span><span class="p">:</span> <span class="n">ndarray</span>
    <span class="n">nMDA</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">nMDADoses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">nVacc</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">nVaccDoses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">nSurvey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">surveyPass</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">elimination</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">propMDA</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">propVacc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">results</span></code> list contains one element per output time,
defined by the <code class="docutils literal notranslate"><span class="pre">outputTimes</span></code> list argument to
<code class="docutils literal notranslate"><span class="pre">run_single_simulation</span></code>.  See <a class="reference internal" href="#expected-arguments"><span class="std std-ref">Expected arguments</span></a>.</p>
</li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">NTDMC Trachoma model</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Neglected Tropical Diseases Modelling Consortium.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>